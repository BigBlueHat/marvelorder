---
// import { byListingDate } from '~/src/helpers/sort.ts'
import { getListingsFromFilePaths } from '~/src/helpers/node/listing-files.ts'
// import { MappedListing } from '~/src/helpers/node/listing.ts'

import Layout from '../layouts/HorizontalScroll.astro'
import ListingRow from '../components/listing-row.vue'

const pages = await Astro.glob('../pages/en/*.md')


const listings = await getListingsFromFilePaths( pages.map( page => page.file ) )

---
<Layout>

	
	<ListingRow 
		client:load
		listings={ listings }
	/>
	
  
	<script is:inline>
		const nextUpcoming = document.querySelector('.listing-card-next-upcoming')
		// Trigger scroll to out upcoming listing here
		// so that we don't have to wait for Vue to hydrate
		document.querySelector('.listing-row').scrollLeft = nextUpcoming.offsetLeft - window.innerWidth + nextUpcoming.offsetWidth * 1.75
	</script>
</Layout>