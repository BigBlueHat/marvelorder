---
// import { byListingDate } from '~/src/helpers/sort.ts'
import { getListingFromFile } from '~/src/helpers/node/listing-files.ts'
// import { MappedListing } from '~/src/helpers/node/listing.ts'

import Layout from '../layouts/HorizontalScroll.astro'
import ListingRow from '../components/listing-row.vue'

const pages = await Astro.glob('../pages/en/*.md')


let listings = await Promise.all( pages.map( async page => {
  const { listing } = await getListingFromFile( page.file )

//   listing.date = new Date( listing.date )

  return new MappedListing( listing )

}) )

// Sort lstings by date
listings = listings.sort( byListingDate ).reverse()

---
<Layout>

	
	<ListingRow 
		client:load
		listings={ listings }
	/>
	
  
	<script is:inline>
		// Redirect your homepage to the first page of documentation.
		// If you have a landing page, remove this script and add it here!
		// window.location.pathname = `/en/introduction`;
	</script>
</Layout>